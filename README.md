# Frugal — Intelligent Registration System

A modern registration form with client-side validation, cascading Country/State/City dropdowns, password strength meter, and full automation tests using Playwright.

## Project structure

```
Frugal/
├── index.html          # Registration form page
├── styles.css          # Styling and validation states
├── app.js              # Validation, cascading dropdowns, password strength
├── data.js             # Countries/states/cities + disposable email list
├── package.json
├── playwright.config.js
├── tests/
│   └── registration.spec.js   # Flow A, B, C automation
├── error-state.png     # Screenshot from Flow A (generated by tests)
├── success-state.png   # Screenshot from Flow B (generated by tests)
└── README.md
```

## Part 1: Web page

### Run the form locally

1. **With Node (recommended)**  
   From project root:
   ```bash
   npm install
   npm run serve
   ```
   Open [http://localhost:3000](http://localhost:3000).

2. **Without server**  
   Open `index.html` in a browser (file://). Some features may be limited.

### Features

- **Required fields:** First Name, Last Name, Email, Phone, Gender, Country, State, City, Password, Confirm Password, Terms & Conditions.
- **Validation:** Invalid fields get a red border and inline error text. Submit is disabled until all required fields are valid.
- **Email:** Disposable domains (e.g. tempmail.com) are blocked.
- **Phone:** Must start with the correct country code when a country is selected (e.g. +1 for United States).
- **Password strength:** Weak / Medium / Strong with a visual bar.
- **Cascading dropdowns:** Country → States → Cities.
- **Success:** On submit, a success message is shown and the form is reset.

---

## Part 2: Automation (Playwright)

### Prerequisites

- Node.js 18+
- Project dependencies installed

### Install and run tests

```bash
cd c:\Users\beshw\Downloads\Frugal
npm install
npx playwright install chromium
npm test
```

The config starts a static server on port 3000 and runs the tests. Screenshots are saved as `error-state.png` and `success-state.png` in the project root.

### Optional commands

- **Headed (see browser):** `npm run test:headed`
- **UI mode:** `npm run test:ui`
- **Manual serve then test:** `npm run serve` (in one terminal), then in another: `npm test` (set `reuseExistingServer: true` in config if needed).

---

## Step-by-step: How the automation script works

### Setup (playwright.config.js)

1. **Test directory:** Tests live in `./tests` (e.g. `registration.spec.js`).
2. **Base URL:** `http://localhost:3000` so all `page.goto('/')` go to the registration page.
3. **Web server:** Before tests run, Playwright starts `npx serve . -l 3000`. When the server is ready, tests run.
4. **Browser:** Tests use Chromium by default.

### Flow A — Negative scenario (missing Last Name)

1. **Launch:** `page.goto('/')` loads the registration page.
2. **Print URL and title:** `page.url()` and `page.title()` are logged to the console.
3. **Fill form (Last Name skipped):**  
   First Name, Email, Phone, Age, Gender, Address, Country/State/City, Password, Confirm Password, and Terms are filled. Last Name is left empty.
4. **Trigger validation:** Focus Last Name then focus First Name so the Last Name field blurs and client-side validation runs. Submit button is asserted as disabled.
5. **Validate:**  
   - Inline error text like “Last name is required” is visible.  
   - Last Name input has the `.invalid` class (red highlight).
6. **Screenshot:** `page.screenshot({ path: 'error-state.png', fullPage: true })` saves the error state.

### Flow B — Positive scenario (success and reset)

1. **Launch:** Same as Flow A.
2. **Fill form (all valid):** Helper `fillForm(page)` fills every required field with valid data; Password and Confirm Password match.
3. **Submit:** Click “Submit Registration”. The simulated backend runs (e.g. 800 ms delay in `app.js`).
4. **Validate:**  
   - Success message containing “Registration Successful!” and “profile has been submitted successfully” is visible.  
   - Form is reset (e.g. First Name is empty).
5. **Screenshot:** `page.screenshot({ path: 'success-state.png', fullPage: true })` saves the success state.

### Flow C — Form logic validation

1. **Country → States:** Select “United States”. After a short wait, the State dropdown is enabled and has the expected options (e.g. California, New York).
2. **State → Cities:** Select “California”. City dropdown is enabled and shows cities (e.g. Los Angeles, San Francisco).
3. **Password strength:**  
   - Type “weak” → strength label shows “Weak”.  
   - Type “MediumPass1” → “Medium”.  
   - Type “StrongPass123!” → “Strong”.
4. **Wrong Confirm Password:** Set Password and Confirm Password to different values, then trigger blur (e.g. focus another field). Inline error “Passwords do not match” (or similar) is visible.
5. **Submit disabled until valid:**  
   - Reload the page; Submit is disabled.  
   - Fill all required fields with valid data; Submit becomes enabled.

---

## Screenshots and video

- **Screenshots:** After running tests, open `error-state.png` and `success-state.png` in the project root.
- **Video:** To record a run:
  - Use **UI mode:** `npm run test:ui`, run the test, then use the trace/video from the report.
  - Or enable video in `playwright.config.js` (e.g. `video: 'on'`) and run `npm test`; videos are under `test-results/`.

---

## Validation rules (summary)

| Rule | Implementation |
|------|----------------|
| Invalid fields in red + inline error | `.invalid` class + `#fieldId-error` text in `app.js` / `styles.css` |
| Submit disabled until valid | `updateSubmitButton()` enables/disables the button based on `validateAll()` |
| No disposable email | `DISPOSABLE_EMAIL_DOMAINS` in `data.js`; checked in `validateField('email')` |
| Phone country code | `COUNTRY_PHONE_CODES` in `app.js`; validated when country is selected |
| Password strength | `getPasswordStrength()` in `app.js`; Weak/Medium/Strong + bar in HTML/CSS |
| Success message | Alert with “Registration Successful!” and “Your profile has been submitted successfully.” |
| Form reset after success | `resetForm()` clears fields and alert after successful submit |

---

## Bonus: UI

- Dark theme with clear contrast.
- Responsive layout (single column on small screens).
- Focus styles and smooth transitions.
- Password strength bar (color and width).
- Clear error/success alerts at the top and inline errors under each field.
